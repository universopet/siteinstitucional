"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[100],{1100:(e,t,o)=>{o.r(t),o.d(t,{default:()=>b});var s=o(1609),a=o(8468),n=o(7143),c=o(6427),r=o(3957),l=o(8744),i=o(1056),d=o(2202),u=o(790);const _=({idx:e,label:t,selectedPalette:o,setSelectedPalette:s,setSelectedColor:a,colors:n,setShowCustomColors:c=null})=>{const r=`conic-gradient(${n[e].primary} 90deg, ${n[e].secondary} 90deg 150deg, ${n[e].tertiary} 150deg 330deg, ${n[e].primary} 330deg 360deg)`,_="nfd-onboarding-sidebar--customize__color-palette-icon";return(0,u.jsxs)("div",{className:`${_}__container`,children:[(0,u.jsx)("div",{role:"presentation",className:o===e?`${_}__container__icon__selected`:`${_}__container__icon`,style:{background:r},onClick:()=>{s(e),a(n[e]);const{isDefault:t,...o}=n[e];(0,i.v)(new i.iC(d.Ep,"generated",{colors:o,source:l.d0})),c&&c(!1)}}),(0,u.jsx)("p",{children:t})]})};var m=o(7723);const p=({onChange:e,palettePrimaryColors:t})=>{const[o,s]=(0,a.useState)(t[0].color),n=[{colors:t,name:(0,m.__)("THEME","wp-module-onboarding")}];return(0,u.jsx)(c.Popover,{placement:"left",children:(0,u.jsx)("div",{className:"nfd-onboarding-sidebar--customize__custom-color-palette__container",children:(0,u.jsx)(c.ColorPalette,{colors:n,value:o,onChange:t=>{s(t),e(t)}})})})};var g=o(7675),h=o(6087);const b=(0,s.forwardRef)((({baseClassName:e="nfd-onboarding-sidebar--customize__design-colors-panel",heading:t},o)=>{const b=()=>{R(0),N(S[0]),D(!1)};(0,s.useImperativeHandle)(o,(()=>({resetToDefaultColors:b})));const{currentData:C,customizeSidebarData:x,themeColors:j}=(0,n.useSelect)((e=>({currentData:e(g.M).getCurrentOnboardingData(),customizeSidebarData:e(g.M).getCustomizeSidebarData(),themeColors:e(g.M).getPreviewSettings().settings.colors})));(0,a.useEffect)((()=>{const e=C.sitegen?.homepages?.active?.slug;let t=C.sitegen.homepages.active.color.defaultPalette;t||(t=(0,h.cloneDeep)(C.sitegen.homepages.active.color.palette),C.sitegen.homepages.data[e].color.defaultPalette=t,C.sitegen.homepages.active.color.defaultPalette=t,I(C))}),[C]);const f=x?.colorPalettes;let v=j?.map((e=>({name:e.name,color:e.color})));v||(v=Object.entries(f[0]).map((([,e])=>({name:(0,m.__)("Custom","wp-module-onboarding"),color:e}))));const y=(()=>{const e=[],t=C?.sitegen?.homepages?.active?.color?.defaultPalette||C?.sitegen?.homepages?.active?.color?.palette;return f.forEach((o=>{let s=!0;["primary","base","tertiary"].forEach((e=>{const a=o[e],n=t.find((t=>t.slug===e))?.color;a!==n&&(s=!1)}));const a={base:o?.base,primary:o?.primary,secondary:o?.secondary||o?.base,tertiary:o?.tertiary||o?.primary,isDefault:s};s?e.unshift(a):e.push(a)})),e})(),[S]=(0,a.useState)(y),[w,P]=(0,a.useState)(null),[$,N]=(0,a.useState)({}),[O,D]=(0,a.useState)(!1),[k,E]=(0,a.useState)(!1),[M,z]=(0,a.useState)(!1),[T,R]=(0,a.useState)(null),[A,B]=(0,a.useState)(""),[U,L]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=C.sitegen.homepages.active.color;if(!w){const t=e.customColors;P(t||y[0])}if(!T&&0!==T){const t=e.selectedPalette||0;R(t),"custom"===t&&(D(!0),z(!0))}}),[C]);const H=e=>{L(!U),B(U?"":e)},{setCurrentOnboardingData:I}=(0,n.useDispatch)(g.M);(0,a.useEffect)((()=>{0!==Object.keys($).length&&null!==T&&(()=>{const e=C.sitegen?.homepages?.active?.slug;if(!e)return;const t=C.sitegen.homepages.active.color;"custom"===T&&(t.customColors=$),t.selectedPalette=T;const o=f["custom"===T?0:T];o.primary=$.primary,o.secondary=$.secondary,o.base=$.base,o.tertiary=$.tertiary,t.palette=(e=>{const t=[];for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const s=o.replace(/_/g,"-"),a=e[o],n=o.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");t.push({slug:s,color:a,name:n})}return t})(o),C.sitegen.homepages.data[e].color=t,I(C)})()}),[$,T]);return(0,u.jsxs)(c.PanelBody,{className:e,initialOpen:!0,children:[(0,u.jsx)(c.PanelRow,{children:(0,u.jsx)("div",{className:`${e}__container`,children:(0,u.jsxs)("div",{className:`${e}__container__text`,children:[(0,u.jsx)("p",{className:`${e}__container__text__heading`,children:(0,u.jsx)("strong",{children:t})}),(0,u.jsx)("div",{className:`${e}__container__color__palette__icon`,children:S.map(((e,t)=>(0,u.jsx)(_,{idx:t,label:0===t?(0,m.__)("Default","wp-module-onboarding"):"",selectedPalette:T,setSelectedPalette:R,setSelectedColor:N,colors:S,setShowCustomColors:D},t)))})]})})}),(0,u.jsxs)(c.PanelRow,{children:[!O&&(0,u.jsx)("div",{className:`${e}__custom__colors__button__container`,children:(0,u.jsx)(c.Button,{onClick:()=>(R("custom"),N(w),D(!0),void(M||E(!0))),children:(0,m.__)("Pick your own colors","wp-module-onboarding")})}),O&&k&&(0,u.jsxs)("div",{className:`${e}__custom__colors__container`,children:[(0,u.jsx)("h5",{className:`${e}__heading`,children:(0,m.__)("CUSTOM COLORS","wp-module-onboarding")}),(0,u.jsx)("div",{children:["primary","secondary","tertiary"].map(((e,t)=>(0,u.jsx)(r.A,{isColorSelected:$,color:$[e],slug:e,name:e.charAt(0).toUpperCase()+e.slice(1),callback:H},t)))}),(0,u.jsxs)("div",{className:`${e}__custom__colors__container__buttons`,children:[(0,u.jsx)(c.Button,{onClick:()=>{M?E(!1):D(!1)},className:"cancel",children:(0,m.__)("Cancel","wp-module-onboarding")}),(0,u.jsx)(c.Button,{onClick:()=>{z(!0),E(!1),R("custom"),P($);const{isDefault:e,...t}=$;(0,i.v)(new i.iC(d.Ep,"custom",{colors:t,source:l.d0}))},variant:"primary",children:(0,m.__)("Apply","wp-module-onboarding")})]}),U&&(0,u.jsx)(p,{onChange:e=>{const t={...$};t[A]=e,N(t)},palettePrimaryColors:v})]}),O&&!k&&(0,u.jsxs)("div",{className:`${e}__custom-color-palette__container`,children:[(0,u.jsxs)("div",{className:`${e}__custom-color-palette__container__header`,children:[(0,u.jsx)("h5",{className:`${e}__heading`,children:(0,u.jsx)("span",{children:(0,m.__)("CUSTOM COLORS","wp-module-onboarding")})}),(0,u.jsx)("button",{onClick:()=>(R("custom"),N(w),void E(!0)),children:(0,m.__)("Edit colors","wp-module-onboarding")})]}),(0,u.jsx)("div",{style:{marginLeft:"5px"},children:(0,u.jsx)(_,{idx:"custom",selectedPalette:T,setSelectedPalette:R,setSelectedColor:N,colors:{custom:w}},"custom")})]})]})]})}))}}]);