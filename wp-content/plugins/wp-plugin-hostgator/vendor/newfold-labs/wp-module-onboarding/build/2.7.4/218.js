"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[218],{90:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(6942),s=n.n(i),a=n(8468),r=n(8969),o=n(9269),d=n(790);const c=({title:e,subtitle:t})=>{const n=(0,a.useContext)(o.D),i=n?.theme||!1;return(0,d.jsxs)("div",{className:"nfd-onboarding-step__heading",children:[(0,d.jsx)("h2",{className:"nfd-onboarding-step__heading__title",children:e}),t&&(0,d.jsxs)("div",{className:"nfd-onboarding-step__heading__subtitle",children:[t,(0,d.jsx)("div",{className:s()("nfd-onboarding-step__heading__icon",i===r.Vw?"nfd-onboarding-step__heading__icon--light":null)})]})]})}},1218:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var i=n(8468),s=n(7143),a=n(7723);var r=n(7708),o=n(3988),d=n(90),c=n(1032),l=n(9034),g=n(3731),_=n(67),u=n(2940),p=n(7675),m=n(8969),h=n(1056),w=n(8744),b=n(2202),f=n(790);const x=()=>{const{setIsHeaderEnabled:e,setSidebarActiveView:t,setHeaderActiveView:n,setDrawerActiveView:x,setIsHeaderNavigationEnabled:v,setFooterActiveView:S,setHideFooterNav:N,updateSiteGenErrorStatus:j,updateAllSteps:y,setInstaWpMigrationUrl:A}=(0,s.useDispatch)(p.M),{siteGenErrorStatus:M,allSteps:E,canMigrateSite:C,currentBrandName:O}=(0,s.useSelect)((e=>({siteGenErrorStatus:e(p.M).getSiteGenErrorStatus(),allSteps:e(p.M).getAllSteps(),canMigrateSite:e(p.M).canMigrateSite(),currentBrandName:e(p.M).getNewfoldBrandName()})));(0,i.useEffect)((()=>{const i=E.filter((e=>e===g.O));if(0===i?.length){let e;e=window.nfdOnboarding.currentFlow===w.d0?(0,u.gK)(E,l.O):(0,u.gK)(E,_.H),y(e.allSteps)}N(!0),e(!1),t(!1),v(!1),n(m.Ix),x(!1),S(m.Sr)}),[]),(0,i.useEffect)((()=>{!1===M&&(async()=>{try{if(C){const e=await(0,r.OD)(),t=e?.body?.data?.redirect_url;t?(A(t),setTimeout((()=>{window.open(t,"_self")}),3e3)):((0,h.v)(new h.iC(b.cW,"migration",{source:w.d0})),j(!0))}else(0,h.v)(new h.iC(b.cW,"migration",{source:w.d0})),j(!0)}catch(e){console.error("Failed to fetch migration URL:",e),(0,h.v)(new h.iC(b.cW,"migration",{source:w.d0})),j(!0)}})()}),[M]);const V=(e=>({heading:(0,a.sprintf)(/* translators: %s: to replace Brand name */ /* translators: %s: to replace Brand name */
(0,a.__)("Let's migrate your existing site to %s","wp-module-onboarding"),e),description:(0,a.__)("Please wait a few seconds while we get your new account ready to import your existing WordPress site. ","wp-module-onboarding"),importText:(0,a.__)("Preparing your account","wp-module-onboarding")}))(O);return(0,f.jsx)(c.tR,{children:(0,f.jsxs)(o.A,{isVerticallyCentered:!0,className:"nfd-onboarding-step--site-gen__migration",children:[(0,f.jsx)(d.A,{title:V.heading}),(0,f.jsxs)("div",{className:"nfd-onboarding-step--site-gen__migration--container",children:[(0,f.jsx)("div",{className:"nfd-onboarding-step--site-gen__migration--container__loader"}),(0,f.jsx)("p",{className:"nfd-onboarding-step--site-gen__migration--container__importtext",children:V?.importText})]}),(0,f.jsx)("p",{className:"nfd-onboarding-step--site-gen__migration__description",children:V?.description})]})})}}}]);