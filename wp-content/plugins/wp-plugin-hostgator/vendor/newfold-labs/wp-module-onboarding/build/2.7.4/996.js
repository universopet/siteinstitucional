"use strict";(globalThis.webpackChunknewfold_Onboarding=globalThis.webpackChunknewfold_Onboarding||[]).push([[996],{513:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(8468),a=n(7673),o=n(790);const s=(0,i.memo)((({title:e})=>(0,o.jsxs)("div",{className:"ai-heading",children:[(0,o.jsx)(a.A,{height:"40px"}),(0,o.jsx)("div",{className:"ai-heading--title",children:e})]})))},2607:(e,t,n)=>{n.d(t,{A:()=>f});var i=n(7723),a=n(8468),o=n(6427),s=n(7143),r=n(4348),d=n(9974),l=n(6079),g=n(7675),c=n(2014),u=n(8969),_=n(2202),p=n(6942),m=n.n(p),h=n(790);const f=(0,a.memo)((({callback:e=!1,className:t,text:n})=>{const a=(0,r.Zp)(),p=(0,r.zy)(),{nextStep:f,currentData:b,socialData:x}=(0,s.useSelect)((e=>({nextStep:e(g.M).getNextStep(),currentData:e(g.M).getCurrentOnboardingData(),socialData:e(g.M).getOnboardingSocialData()})),[]),w=null===f||!1===f,{setOnboardingSocialData:v}=(0,s.useDispatch)(g.M);return(0,h.jsx)(o.Button,{className:m()("skip-button",t),onClick:w?()=>async function(e){if(b){if(b.isComplete=(new Date).getTime(),e?.includes("basic-info")){const e=await async function(){const e=await(0,c.mt)(),t=await(0,c.oc)(x);return null!==t?.error?e?.body:t?.body}();e&&v(e),await d.HiiveAnalytics.dispatchEvents(_.XJ)}(0,l.V1)(b)}window.location.replace(u.R0)}(p.pathname):()=>("function"==typeof e&&e(),void a(f.path)),children:n||(0,i.__)("Skip this Step","wp-module-onboarding")})}))},5508:e=>{e.exports=function(e,t){return"string"==typeof e?s(e):"number"==typeof e?o(e,t):null},e.exports.format=o,e.exports.parse=s;var t=/\B(?=(\d{3})+(?!\d))/g,n=/(?:\.0*|(\.[^0]+)0+)$/,i={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},a=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function o(e,a){if(!Number.isFinite(e))return null;var o=Math.abs(e),s=a&&a.thousandsSeparator||"",r=a&&a.unitSeparator||"",d=a&&void 0!==a.decimalPlaces?a.decimalPlaces:2,l=Boolean(a&&a.fixedDecimals),g=a&&a.unit||"";g&&i[g.toLowerCase()]||(g=o>=i.pb?"PB":o>=i.tb?"TB":o>=i.gb?"GB":o>=i.mb?"MB":o>=i.kb?"KB":"B");var c=(e/i[g.toLowerCase()]).toFixed(d);return l||(c=c.replace(n,"$1")),s&&(c=c.split(".").map((function(e,n){return 0===n?e.replace(t,s):e})).join(".")),c+r+g}function s(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=a.exec(e),o="b";return n?(t=parseFloat(n[1]),o=n[4].toLowerCase()):(t=parseInt(e,10),o="b"),isNaN(t)?null:Math.floor(i[o]*t)}},6999:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(6942),a=n.n(i),o=n(4348),s=n(7143),r=n(6427),d=n(7677),l=n(6655),g=n(7675),c=n(790);const u=({text:e,className:t,callback:n=null,disabled:i=!1,showChevronRight:u=!0})=>{const _=(0,o.Zp)(),{nextStep:p}=(0,s.useSelect)((e=>({nextStep:e(g.M).getNextStep()})));return(0,c.jsxs)(r.Button,{className:a()("nfd-onboarding-button--site-gen-next",{"nfd-onboarding-button--site-gen-next--disabled":i},t),onClick:()=>{i||(n&&"function"==typeof n&&n(),p&&_(p.path))},children:[(0,c.jsx)("p",{className:"nfd-onboarding-button--site-gen-next--text",children:e}),u&&(0,c.jsx)(d.A,{className:"nfd-onboarding-button--site-gen-next--icon",icon:l.A})]})}},8053:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(5573),a=n(790);const o=(0,a.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(i.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})})},9645:(e,t,n)=>{n.d(t,{V:()=>r});var i=n(5435),a=n(8674),o=n(1455),s=n.n(o);async function r(e){const t=await function(e){return new Promise(((t,n)=>{const i=new FileReader;i.addEventListener("loadend",(e=>t(e.target.result))),i.addEventListener("error",n),i.readAsArrayBuffer(e)}))}(e),n={"Content-Type":"image/png"};return n["Content-Disposition"]="attachment; filename="+e.name,await(0,i.h)(s()({url:(0,a.zV)("media"),method:"POST",headers:n,body:t}))}},9996:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var i=n(9491),a=n(8468),o=n(7143),s=n(3582),r=n(7723);var d=n(1056),l=n(2607),g=n(513),c=n(3988),u=n(6999),_=n(7677),p=n(8053),m=n(6942),h=n.n(m),f=n(5508),b=n.n(f),x=n(9645),w=n(8969),v=n(9269),N=n(4097),j=n(790);const S=(0,a.memo)((({image:e,imageSetter:t,onFailure:n})=>{const i=(0,a.useRef)(null),{theme:o}=(0,a.useContext)(v.D),[s,d]=(0,a.useState)(!0),[l,g]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[m,f]=(0,a.useState)("");async function S(e){if(e){g(!0);const n=await(0,x.V)(e);if(!n?.body)return g(!1),y(),!1;const i=n.body?.id,a=n.body?.source_url;e&&"image/png"===e.type&&(e=>{const t=new Image;t.crossOrigin="Anonymous",t.onload=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");e.width=t.width,e.height=t.height,n.drawImage(t,0,0);const i=n.getImageData(0,0,e.width,e.height).data;let a=0,o=0,s=0,r=0;for(let e=0;e<i.length;e+=4)i[e+3]>0&&(a+=i[e],o+=i[e+1],s+=i[e+2],r++);r>0&&(a=Math.floor(a/r),o=Math.floor(o/r),s=Math.floor(s/r)),(e=>{const t=(e=>{const[t,n,i]=e.match(/\d+/g).map(Number);return.2126*t+.7152*n+.0722*i>160?w.fS:w.Vw})(e);f(t)})(`rgb(${a}, ${o}, ${s})`)},t.src=e})(a),t({id:i,url:a,fileName:e?.name,fileSize:e?.size})}g(!1)}const y=()=>{if("function"==typeof n)return n()},D=!l&&0!==e?.id&&void 0!==e?.id,k=h()("nfd-onboarding-image-uploader--with-text",{"nfd-onboarding-image-uploader--with-text--on-drag":c,"nfd-onboarding-image-uploader--with-text--not-dashed":D,"nfd-onboarding-image-uploader--with-text--not-dashed__dark":D&&m===w.fS,"nfd-onboarding-image-uploader--with-text--not-dashed__light":D&&m===w.Vw});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:k,onDrop:e=>(e=>{e.preventDefault(),e.stopPropagation(),u(!1),e?.dataTransfer?.files&&e?.dataTransfer?.files.length>0&&("image"===e?.dataTransfer?.files[0]?.type.split("/")[0]?(d(!0),S(e?.dataTransfer?.files[0])):d(!1))})(e),onDragOver:e=>(e=>{e.preventDefault(),e.stopPropagation(),u(!0)})(e),onDragEnter:e=>(e=>{e.preventDefault(),e.stopPropagation(),u(!0)})(e),onDragLeave:e=>(e=>{e.preventDefault(),e.stopPropagation(),u(!1)})(e),children:l?(0,j.jsx)(N.A,{}):(0,j.jsxs)(j.Fragment,{children:[!D&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"nfd-onboarding-image-uploader--with-text__heading",children:[(0,j.jsx)("div",{className:h()("nfd-onboarding-image-uploader--with-text__heading__icon",o===w.Vw?"nfd-onboarding-image-uploader--with-text__heading__icon--light":null)}),(0,j.jsxs)("p",{className:"nfd-onboarding-image-uploader--with-text__heading__text",children:[(0,j.jsx)("span",{className:"nfd-onboarding-image-uploader--with-text__heading__text__drop",children:(0,r.__)("Drop your logo here, or ","wp-module-onboarding")}),(0,j.jsx)("button",{onClick:()=>{i?.current.click()},className:"nfd-onboarding-image-uploader--with-text__heading__text__modal",children:(0,r.__)("browse","wp-module-onboarding")}),(0,j.jsx)("input",{className:"nfd-onboarding-image-uploader--with-text__heading__text__input",accept:"image/*",type:"file",ref:i,onChange:e=>{e?.target?.files&&e?.target?.files.length>0&&(d(!0),S(e?.target?.files[0]))}})]})]}),(0,j.jsx)("div",{className:"nfd-onboarding-image-uploader--with-text__subheading",children:(0,j.jsx)("p",{className:"nfd-onboarding-image-uploader--with-text__subheading__text",children:(0,r.__)("supports .jpg, .png, .gif","wp-module-onboarding")})})]}),D&&(0,j.jsxs)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview",children:[(0,j.jsx)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__wrapper",children:(0,j.jsx)("img",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__image",src:e.url,alt:(0,r.__)("Site Logo Preview","wp-module-onboarding")})}),(0,j.jsxs)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details",children:[(0,j.jsx)("p",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details__filename",children:e.fileName}),(0,j.jsx)("p",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__details__filesize",children:b()(e.fileSize)})]}),(0,j.jsx)("div",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset",children:(0,j.jsx)("button",{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset__button",onClick:()=>{d(!0),f(""),t({id:0,url:"",fileName:"",fileSize:0}),i?.current?.files.length>0&&(i.current.value="")},children:(0,j.jsx)(_.A,{className:"nfd-onboarding-image-uploader--with-text__site_logo__preview__reset__button__icon",icon:p.A})})})]})]})}),!s&&(0,j.jsx)("div",{className:"nfd-onboarding-image-uploader--with-text--invalid",children:(0,r.__)("This is not a valid Image Type","wp-module-onboarding")})]})}));var y=n(7675),D=n(2202),k=n(8744),C=n(1032);const A=()=>{const[e,t]=(0,a.useState)(),n=(0,i.useViewportMatch)("small"),{currentData:_}=(0,o.useSelect)((e=>({currentData:e(y.M).getCurrentOnboardingData()}))),{getEditedEntityRecord:p}=(0,o.useSelect)((e=>e(s.store)),[]),{editEntityRecord:m}=(0,o.useDispatch)(s.store),{setIsFooterNavAllowed:h,setIsHeaderEnabled:f,setSidebarActiveView:b,setHeaderActiveView:x,setDrawerActiveView:v,setHideFooterNav:N,setCurrentOnboardingData:A,setIsHeaderNavigationEnabled:L,updateSiteGenErrorStatus:M}=(0,o.useDispatch)(y.M);(0,a.useEffect)((()=>{if(N(!1),f(!0),b(!1),L(!0),x(w.Ix),v(!1),0!==_.sitegen.siteLogo?.id)return h(!0),t(_.sitegen.siteLogo);h(!1),p("root","site")}),[]);const T={heading:(0,r.__)("Do you have a logo you would like to use for this site?","wp-module-onboarding"),imageUploader:{subHeading:(0,r.__)("supports .jpg, .png, .svg","wp-module-onboarding")},buttons:{skip:(0,r.__)("Skip for now","wp-module-onboarding"),next:(0,r.__)("Next","wp-module-onboarding")}};return(0,j.jsx)(C.tR,{children:(0,j.jsx)(c.A,{isCentered:!0,className:"nfd-onboarding-step--site-gen__site-logo",children:(0,j.jsxs)("div",{className:"nfd-onboarding-step--site-gen__site-logo__container",children:[(0,j.jsx)(g.A,{title:T.heading}),(0,j.jsx)(S,{image:e,imageSetter:e=>{const n={..._};n.sitegen.siteLogo.id=e.id,n.sitegen.siteLogo.url=e.url,n.sitegen.siteLogo.fileName=e.fileName,n.sitegen.siteLogo.fileSize=e.fileSize,A(n),h(0!==e.id),m("root","site",void 0,{site_logo:e.id}),t(e)},onFailure:()=>{(0,d.v)(new d.iC(D.cW,"site-logo",{source:k.d0})),M(!0)}}),(0,j.jsxs)("div",{className:"nfd-onboarding-step--site-gen__site-logo__container__buttons",children:[(0,j.jsx)(l.A,{callback:()=>(()=>{const e={..._};e.sitegen.siteLogo={id:0,url:"",fileName:"",fileSize:0},A(e),t(void 0),h(!1),(0,d.v)(new d.iC(D.Qp,void 0,{source:k.d0}))})(),className:"nfd-onboarding-step--site-gen__site-logo__container__buttons__skip",text:T.buttons.skip}),n&&(0,j.jsx)(u.A,{callback:()=>{e&&(0,d.v)(new d.iC(D.WT,void 0,{source:k.d0}))},text:T.buttons.next,disabled:void 0===e||0===e?.id})]})]})})})}}}]);